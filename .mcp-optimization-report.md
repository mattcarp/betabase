# MCP Configuration Optimization Report
**Date:** 2025-10-27
**Backup:** `.mcp.json.backup-20251027-154234`

## Removed Servers (Estimated ~21,000 token savings)

### 1. browserbase (~13,000 tokens)
- **Why removed:** Redundant with playwright-mcp
- **Tools lost:** Multi-session browser management, stagehand navigation/act/extract/observe
- **Impact:** Low - playwright-mcp provides equivalent functionality
- **Restore if:** You need cloud-based browser sessions or multi-session parallel testing

### 2. testsprite (~3,500 tokens)
- **Why removed:** Not mentioned in workflow documentation
- **Tools lost:** Test generation, PRD parsing, test execution
- **Impact:** Low - Not currently used
- **Restore if:** You want AI-powered test generation

### 3. firecrawl-mcp (~4,500 tokens)
- **Why removed:** Redundant with playwright-mcp and chrome-devtools
- **Tools lost:** Web scraping, mapping, crawling, search
- **Impact:** Low - playwright-mcp handles web automation
- **Restore if:** You need specialized web crawling/scraping

## Kept Servers (Essential)

1. **playwright-mcp** - Testing automation (mentioned in CLAUDE.md)
2. **aoma-mesh** - Custom AOMA server (project-specific)
3. **ref-tools** - Lightweight documentation search
4. **task-master-ai** - Core workflow management (from .taskmaster/CLAUDE.md)
5. **semgrep** - Security scanning (Fiona requirement from CLAUDE.md)
6. **supabase** - Database operations
7. **render** - Deployment management
8. **chrome-devtools** - Browser DevTools integration
9. **shadcn** - UI component management

## Testing Checklist

After restarting Claude Code, verify:

- [ ] playwright-mcp tools work (e.g., navigate, screenshot)
- [ ] task-master-ai tools work (e.g., list tasks, next task)
- [ ] render tools work (e.g., list services)
- [ ] shadcn tools work (e.g., search components)
- [ ] chrome-devtools tools work
- [ ] No errors in MCP connection logs

## Rollback Instructions

If you need to restore removed servers:

```bash
# Full rollback
cp .mcp.json.backup-20251027-154234 .mcp.json

# Restore individual server (add to .mcp.json mcpServers section):

# Browserbase
"browserbase": {
  "type": "stdio",
  "command": "npx",
  "args": ["-y", "@browserbasehq/mcp"],
  "env": {
    "BROWSERBASE_API_KEY": "***REMOVED***",
    "BROWSERBASE_PROJECT_ID": "zygotic-lynx-9x1Bh9",
    "NODE_ENV": "development"
  }
}

# TestSprite
"testsprite": {
  "type": "stdio",
  "command": "npx",
  "args": ["-y", "@testsprite/testsprite-mcp@latest"],
  "env": {
    "NODE_ENV": "development",
    "TESTSPRITE_API_KEY": "sk-user-ftTKeY8Vh_yLFLRhB7Rvvk7YCvLjW268LcOSpbhd4yb1ZYqEpUpUh3UfYpEvfGWv4kZ37poEtsLYcFz3BN3FCCiwGkiCJyz_F9n_L8efplsbzIvpU_CpEOV5YIiT51yT9aE"
  }
}

# Firecrawl
"firecrawl-mcp": {
  "type": "stdio",
  "command": "npx",
  "args": ["-y", "firecrawl-mcp"],
  "env": {
    "FIRECRAWL_API_KEY": "${FIRECRAWL_API_KEY}",
    "NODE_ENV": "development"
  }
}
```

## Next Steps

1. Restart Claude Code to load new configuration
2. Run through testing checklist
3. Monitor for any missing functionality
4. If no issues after 1 week, can delete backup file

## Notes

- Original file size: 2.9K
- Optimized file size: ~2.0K
- Servers before: 12
- Servers after: 9
- Estimated context savings: ~21,000 tokens (15% reduction in MCP tools context)
