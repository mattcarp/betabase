<ng-container *ngIf="isLoading; else template">
  <div class="spinner">
    <div class="spinner-progress"></div>
    <div class="spinner-info">Loading...</div>
  </div>
</ng-container>

<ng-template #template>
  <div class="container">
    <h2>Choose An Application:</h2>
    <div class="cards">
      <mat-card (click)="onButtonClick('/dashboard/Partner Previewer/show')" class="card partner">
        <mat-card-header>
          <div mat-card-avatar class="card-avatar">
            <img src="/assets/logos/partner-logo.png" alt="logo">
          </div>
          <mat-card-title>Partner Previewer</mat-card-title>
          <mat-card-subtitle>
            <span *ngIf="data?.partnerPreviewerRound?.releaseNum">release: {{data?.partnerPreviewerRound?.releaseNum}}</span>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <section>
            <div>Current Round:</div>
            <div>
              <ng-container *ngIf="!data?.partnerPreviewerRound?.releaseNum">No Current Round</ng-container>
              <ng-container
                *ngIf="data?.partnerPreviewerRound?.releaseNum">{{data?.partnerPreviewerRound?.name}}</ng-container>
            </div>
          </section>

          <section>
            <div>Testing Period:</div>
            <div>
              <ng-container *ngIf="!data?.partnerPreviewerRound?.releaseNum">None Scheduled</ng-container>
              <ng-container *ngIf="data?.partnerPreviewerRound?.releaseNum">
                {{data?.partnerPreviewerRound?.startsAt | date}}
                to
                {{data?.partnerPreviewerRound?.endsAt | date}}
              </ng-container>
            </div>
          </section>

          <section>
            <div>Tests This Round:</div>
            <div>{{data?.partnerPreviewerTestCount}} total, {{data?.partnerPreviewerFails}} fails</div>
          </section>

          <section>
            <div>Cases Available:</div>
            <div>{{data?.partnerPreviewerScenarios?.scenarioCount}}</div>
          </section>
        </mat-card-content>
      </mat-card>

      <mat-card (click)="onButtonClick('/dashboard/aoma/show')" class="card aoma">
        <mat-card-header>
          <div mat-card-avatar class="card-avatar">
            <img src="/assets/logos/aoma-logo.gif" alt="logo">
          </div>
          <mat-card-title>AOMA</mat-card-title>
          <mat-card-subtitle>
            <span *ngIf="data?.aomaRound?.releaseNum">release: {{data?.aomaRound?.releaseNum}}</span>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <section>
            <div>Current Round:</div>
            <div>
              <ng-container *ngIf="!data?.aomaRound?.releaseNum">No Current Round</ng-container>
              <ng-container *ngIf="data?.aomaRound?.releaseNum">{{data?.aomaRound?.name}}</ng-container>
            </div>
          </section>

          <section>
            <div>Testing Period:</div>
            <div>
              <ng-container *ngIf="!data?.aomaRound?.releaseNum">None Scheduled</ng-container>
              <ng-container *ngIf="data?.aomaRound?.releaseNum">
                {{data?.aomaRound?.startsAt | date}}
                to
                {{data?.aomaRound?.endsAt | date}}
              </ng-container>
            </div>
          </section>

          <section>
            <div>Tests This Round:</div>
            <div>{{data?.aomaTestCount}} total, {{data?.aomaFails}} fails</div>
          </section>

          <section>
            <div>Cases Available:</div>
            <div>{{data?.aomaScenarios?.scenarioCount}}</div>
          </section>
        </mat-card-content>
      </mat-card>

      <mat-card (click)="onButtonClick('/dashboard/promo-admin/show')" class="card promo-admin">
        <mat-card-header>
          <div mat-card-avatar class="card-avatar">
            <img src="/assets/logos/promo-admin-logo.png" alt="logo">
          </div>
          <mat-card-title>Promo Portal Admin</mat-card-title>
          <mat-card-subtitle>
            <span *ngIf="data?.promoAdminRound?.releaseNum">release: {{data?.promoAdminRound?.releaseNum}}</span>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <section>
            <div>Current Round:</div>
            <div>
              <ng-container *ngIf="!data?.promoAdminRound?.releaseNum">No Current Round</ng-container>
              <ng-container *ngIf="data?.promoAdminRound?.releaseNum">{{data?.promoAdminRound?.name}}</ng-container>
            </div>
          </section>

          <section>
            <div>Testing Period:</div>
            <div>
              <ng-container *ngIf="!data?.promoAdminRound?.releaseNum">None Scheduled</ng-container>
              <ng-container *ngIf="data?.promoAdminRound?.releaseNum">
                {{data?.promoAdminRound?.startsAt | date}}
                to
                {{data?.promoAdminRound?.endsAt | date}}
              </ng-container>
            </div>
          </section>

          <section>
            <div>Tests This Round:</div>
            <div>{{data?.promoAdminTestCount}} total, {{data?.promoAdminFails}} fails</div>
          </section>

          <section>
            <div>Cases Available:</div>
            <div>{{data?.promoAdminScenarios?.scenarioCount}}</div>
          </section>
        </mat-card-content>
      </mat-card>

      <mat-card (click)="onButtonClick('/dashboard/promo/show')" class="card promo">
        <mat-card-header>
          <div mat-card-avatar class="card-avatar">
            <img src="/assets/logos/promo-logo.png" alt="logo">
          </div>
          <mat-card-title>Promo Portal</mat-card-title>
          <mat-card-subtitle>
            <span *ngIf="data?.promoRound?.releaseNum">release: {{data?.promoRound?.releaseNum}}</span>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <section>
            <div>Current Round:</div>
            <div>
              <ng-container *ngIf="!data?.promoRound?.releaseNum">No Current Round</ng-container>
              <ng-container *ngIf="data?.promoRound?.releaseNum">{{data?.promoRound?.name}}</ng-container>
            </div>
          </section>

          <section>
            <div>Testing Period:</div>
            <div>
              <ng-container *ngIf="!data?.promoRound?.releaseNum">None Scheduled</ng-container>
              <ng-container *ngIf="data?.promoRound?.releaseNum">
                {{data?.promoRound?.startsAt | date}}
                to
                {{data?.promoRound?.endsAt | date}}
              </ng-container>
            </div>
          </section>

          <section>
            <div>Tests This Round:</div>
            <div>{{data?.promoTestCount}} total, {{data?.promoFails}} fails</div>
          </section>

          <section>
            <div>Cases Available:</div>
            <div>{{data?.aomaScenarios?.scenarioCount}}</div>
          </section>
        </mat-card-content>
      </mat-card>

      <mat-card (click)="onButtonClick('/dashboard/dx/show')" class="card dx">
        <mat-card-header>
          <div mat-card-avatar class="card-avatar">
            <img src="/assets/logos/dx-logo.png" alt="logo">
          </div>
          <mat-card-title>Digital Exchange</mat-card-title>
          <mat-card-subtitle>
            <span *ngIf="data?.dxRound?.releaseNum">release: {{data?.dxRound?.releaseNum}}</span>
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <section>
            <div>Current Round:</div>
            <div>
              <ng-container *ngIf="!data?.dxRound?.releaseNum">No Current Round</ng-container>
              <ng-container *ngIf="data?.dxRound?.releaseNum">{{data?.dxRound?.name}}</ng-container>
            </div>
          </section>

          <section>
            <div>Testing Period:</div>
            <div>
              <ng-container *ngIf="!data?.dxRound?.releaseNum">None Scheduled</ng-container>
              <ng-container *ngIf="data?.dxRound?.releaseNum">
                {{data?.dxRound?.startsAt | date}}
                to
                {{data?.dxRound?.endsAt | date}}
              </ng-container>
            </div>
          </section>

          <section>
            <div>Tests This Round:</div>
            <div>{{data?.dxTestCount}} total, {{data?.dxFails}} fails</div>
          </section>

          <section>
            <div>Cases Available:</div>
            <div>{{data?.dxScenarios?.scenarioCount}}</div>
          </section>
        </mat-card-content>
      </mat-card>

    </div>
  </div>
</ng-template>
