graph TB
    subgraph "MCP Clients"
        Claude[ğŸ¤– Claude Desktop]
        VSCode[ğŸ’» VS Code]
        SIAM[ğŸŒ SIAM/Betabase]
    end

    subgraph "Railway Deployment"
        Health[ğŸ¥ /health endpoint]
        MCPServer[âš™ï¸ AOMA Mesh MCP Server<br/>v2.7.0]
        HTTPBridge[ğŸŒ‰ HTTP Bridge<br/>REST â†’ MCP]
    end

    subgraph "MCP Tools"
        AomaKnowledge[ğŸ“š aoma-knowledge.tool.ts<br/>OpenAI Assistant API]
        JiraSearch[ğŸ« jira-search.tool.ts<br/>Vector + Text Search]
        GitSearch[ğŸ” git-search.tool.ts<br/>Semantic Search]
        CodeSearch[ğŸ’» code-search.tool.ts<br/>Vector Search]
        DevContext[ğŸ› ï¸ development-context.tool.ts<br/>Analysis]
        SwarmAnalysis[ğŸ swarm-analysis.tool.ts<br/>Cross-Vector Intelligence]
    end

    subgraph "Services"
        Langchain[ğŸ”— LangChain Orchestrator]
        OpenAIService[ğŸ¤– OpenAI Service]
        SupabaseService[ğŸ—„ï¸ Supabase Service]
    end

    subgraph "Data Sources"
        Supabase[(ğŸ—„ï¸ Supabase Postgres)]
        JiraTickets[(ğŸ« jira_tickets<br/>6,554+ tickets)]
        JiraEmbed[(ğŸ“Š jira_ticket_embeddings<br/>Vector Embeddings)]
        GitCommits[(ğŸ“ git_commits)]
        CodeFiles[(ğŸ“„ code_files)]
        GitFileEmbed[(ğŸ“Š git_file_embeddings)]
        OpenAIAssist[ğŸ¤– OpenAI Assistant<br/>AOMA Knowledge Base]
    end

    Claude -->|stdio| MCPServer
    VSCode -->|stdio| MCPServer
    SIAM -->|HTTP REST| HTTPBridge
    HTTPBridge --> MCPServer

    MCPServer --> Health

    MCPServer --> AomaKnowledge
    MCPServer --> JiraSearch
    MCPServer --> GitSearch
    MCPServer --> CodeSearch
    MCPServer --> DevContext
    MCPServer --> SwarmAnalysis

    AomaKnowledge --> OpenAIService
    JiraSearch --> Langchain
    GitSearch --> SupabaseService
    CodeSearch --> SupabaseService
    DevContext --> Langchain
    SwarmAnalysis --> Langchain

    Langchain --> SupabaseService
    OpenAIService --> OpenAIAssist
    SupabaseService --> Supabase

    Supabase --> JiraTickets
    Supabase --> JiraEmbed
    Supabase --> GitCommits
    Supabase --> CodeFiles
    Supabase --> GitFileEmbed

    style MCPServer fill:#ffccbc
    style Supabase fill:#c8e6c9
    style Langchain fill:#fff9c4
    style OpenAIAssist fill:#f3e5f5
